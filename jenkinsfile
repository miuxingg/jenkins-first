pipeline{
    agent any
    triggers {
        pollSCM('*/3 * * * *') 
    }
    stages{
        stage("Node modules update"){
            sh "yarn"
        }

        stage("Build docker image"){
            steps{
                sh 'docker build -t jenkis-nest .'
            }
            
        }
        stage("Run docker image"){
            steps{
               sh 'docker run -p 7000:7000 jenkis-nest'
            }
            
        }
        
    }
    post{
        success{
            echo "========pipeline executed successfully ========"
        }
        failure{
            echo "========pipeline execution failed========"
        }
    }
}